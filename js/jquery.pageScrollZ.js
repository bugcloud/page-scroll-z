// Generated by CoffeeScript 1.3.3

/*
pageScrollZ - jQuery Plugin

About this plugin, visit github project page.
https://github.com/bugcloud/page-scroll-z
*/


(function() {
  var $;

  $ = jQuery;

  $.fn.pageScrollZ = function(opt) {
    var $_scroll, $_that, default_options, obj, options;
    default_options = {
      scrollContent: "html, body",
      animation: true,
      animationSpeed: 500,
      easingFunction: "swing",
      fixTop: "0"
    };
    options = $.extend({}, default_options, opt);
    obj = {};
    $_that = $(this);
    $_scroll = $(options.scrollContent);
    obj.animation = options.animation;
    $_that.off('click').on('click', function(e) {
      var $target, duration, fix, props, targetOffsetTop;
      e.stopPropagation();
      e.preventDefault();
      $target = $("" + ($(this).attr('href').replace(window.location.protocol + "//" + window.location.host + window.location.pathname, '')));
      if (!($target.length > 0)) {
        window.location.replace($(this).attr('href'));
      }
      targetOffsetTop = 0;
      if ($target && $target.offset()) {
        targetOffsetTop = $target.offset().top;
        fix = 0;
        if (options.fixTop) {
          fix = parseInt(options.fixTop);
        }
        if (fix !== 0) {
          targetOffsetTop = targetOffsetTop + fix;
        }
      }
      duration = obj.animation ? options.animationSpeed : 0;
      $_scroll.stop(false, false);
      props = {
        scrollTop: "" + targetOffsetTop + "px"
      };
      return $_scroll.animate(props, duration, options.easingFunction);
    });
    this.switchAnimation = function(b) {
      return obj.animation = b;
    };
    return this;
  };

}).call(this);
